{"ast":null,"code":"import _slicedToArray from\"/home/wws/Desktop/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import\"./Todo.css\";import Modal from'./../../common/Modal/Modal';import Axios from\"axios\";import{AuthContext}from'../../context/Auth';function Todo(props){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var bucketId=props.bucketId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showDetails=_useState4[0],setShowDetails=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),postTitle=_useState6[0],setPostTitle=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),postDescription=_useState8[0],setPostDescription=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),scheduleDate=_useState10[0],setScheduleDate=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),formComplete=_useState12[0],setFormComplete=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),formIncompleteError=_useState14[0],setFormIncompleteError=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),postName=_useState16[0],setPostName=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),postDetail=_useState18[0],setPostDetail=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),postDate=_useState20[0],setPostDate=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),postData=_useState22[0],setPostData=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isPostAdded=_useState24[0],setIsPostAdded=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),isPostDelete=_useState26[0],setIsPostDelete=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),isPostEdited=_useState28[0],setIsPostEdited=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),editDetails=_useState30[0],setEditDetails=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),todoId=_useState32[0],setPostId=_useState32[1];var postTitles=React.useRef();var postDescriptions=React.useRef();var scheduleDates=React.useRef();var userId=currentUser.uid;// to Hide past date\nvar today=new Date();var month,day=null;if(today.getMonth()<10||today.getDate()<10){month=\"0\"+(today.getMonth()+1);day=\"0\"+today.getDate();}var date=day+\"-\"+month+\"-\"+today.getFullYear();useEffect(function(){setIsPostAdded(false);setIsPostDelete(false);setIsPostEdited(false);getPostData(currentUser.email);},[isPostAdded,isPostDelete,isPostEdited,currentUser]);var getPostData=function getPostData(email){Axios.get(\"https://todo-app-a1032.firebaseio.com/\".concat(userId,\"/bucketContents/\").concat(bucketId,\"/todo.json\")).then(function(response){setPostData(response.data);// setPostData(Object.entries(response.data).filter((e)=>(e.user === email)));\n// console.log(response);\n}).catch(function(error){return console.log(error);});};//  to Add and Edit cardData in DB\nvar handleAddPostData=function handleAddPostData(e){//   check if all input is taken\nif(postTitles.current.value.length===0||postDescriptions.current.value.length===0||scheduleDates.current.value.length===0){setFormComplete(false);setFormIncompleteError(true);}else{// if user wants to edit then put request is used\nif(editDetails){Axios.put(\"https://todo-app-a1032.firebaseio.com/\".concat(userId,\"/bucketContents/\").concat(bucketId,\"/todo/\").concat(todoId,\".json\"),{postName:postName===\"\"?postTitle:postName,postDetail:postDetail===\"\"?postDescription:postDetail,postDate:postDate===\"\"?scheduleDate:postDate,user:currentUser.email}).then(function(response){alert(\"ToDo edited succesfully\");setIsPostEdited(true);}).catch(function(error){return console.log(\"Error in editDetails\"+error);});}//  if user wants to add a new card\nelse{Axios.post(\"https://todo-app-a1032.firebaseio.com/\".concat(userId,\"/bucketContents/\").concat(bucketId,\"/todo.json\"),{postName:postName,postDetail:postDetail,postDate:postDate,user:currentUser.email}).then(function(response){alert(\"ToDo added succesfully\");setIsPostAdded(true);}).catch(function(error){return console.log(\"Error\"+error);});}setShowModal(false);setEditDetails(false);setPostName(\"\");setPostDetail(\"\");setPostDate(\"\");}};// on click of card this function shows details\nvar onPostClick=function onPostClick(postTitle,postDescription,scheduleDate,postId,e){setShowDetails(true);setPostTitle(postTitle);setPostDescription(postDescription);setScheduleDate(scheduleDate);setPostId(postId);};// handles edit button click\nvar handleEdit=function handleEdit(e){setShowDetails(false);setShowModal(true);setEditDetails(true);};// handles archive on card archive click\nvar handleDelete=function handleDelete(e){if(window.confirm(\"Are you sure you want to delete the ToDo?\")){Axios.delete(\"https://todo-app-a1032.firebaseio.com/\".concat(userId,\"/bucketContents/\").concat(bucketId,\"/todo/\").concat(todoId,\".json\")).then(function(response){alert(\"ToDo deleted succesfully\");setIsPostDelete(true);}).catch(function(error){return console.log(\"Error\"+error);});setShowDetails(false);}};var modalCloseHandler=function modalCloseHandler(){setShowModal(false);setEditDetails(false);};var showmodalCloseHandler=function showmodalCloseHandler(){setShowDetails(false);};//modal of Add and Edit Card\nvar modalContent=showModal?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 text-left\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-warning\"},editDetails?'Edit ToDo':'Add ToDo'),formIncompleteError?/*#__PURE__*/React.createElement(\"p\",{style:{color:'red'}},\"Kindly complete the form before adding Column\"):null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"postTitle\",className:\"text-white\"},\"Title\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"post_title\",defaultValue:editDetails?postTitle:\"\",placeholder:\"Enter a title\",ref:postTitles,onChange:function onChange(event){return setPostName(event.target.value);},className:\"form-control\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"postDescription\",className:\"text-white\"},\"Description\"),/*#__PURE__*/React.createElement(\"textarea\",{type:\"text\",id:\"post_description\",defaultValue:editDetails?postDescription:\"\",placeholder:\"Enter a Description\",ref:postDescriptions,onChange:function onChange(event){return setPostDetail(event.target.value);},className:\"form-control\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"schedule\",className:\"text-white\"},\"Date\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",id:\"schedule_date\",min:date,defaultValue:editDetails?scheduleDate:\"\",ref:scheduleDates,onChange:function onChange(event){return setPostDate(event.target.value);},className:\"form-control\"})),/*#__PURE__*/React.createElement(\"button\",{disabled:formComplete,className:\"btn btn-warning\",onClick:handleAddPostData},editDetails?'Edit ToDo':'Add ToDo'))))):null;//modal of show card details\nvar showmodalContent=showDetails?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container my-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",{className:\"text-left text-warning\"},\"View ToDo\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:\"editBtn\",className:\"btn btn-sm btn-warning\",onClick:handleEdit},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-pencil\",\"aria-hidden\":\"true\"})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:\"deleteBtn\",className:\"btn btn-danger btn-sm ml-2\",onClick:handleDelete},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash\",\"aria-hidden\":\"true\"})))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"text-left my-4\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Title\"),/*#__PURE__*/React.createElement(\"p\",null,postTitle)),/*#__PURE__*/React.createElement(\"div\",{className:\"text-left my-4\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Description\"),/*#__PURE__*/React.createElement(\"p\",null,postDescription)),/*#__PURE__*/React.createElement(\"div\",{className:\"text-left my-4\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Date\"),/*#__PURE__*/React.createElement(\"p\",null,scheduleDate)))))):null;return/*#__PURE__*/React.createElement(\"div\",{className:\"todo-data bg-black pt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between border p-2 shadow \"},/*#__PURE__*/React.createElement(\"div\",{className:\"pt-2\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"text-white\"},\"Add To-Do\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-warning\",onClick:function onClick(){return setShowModal(true);}},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-plus-square\",\"aria-hidden\":\"true\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"todo-list my-4\"},postData?Object.entries(postData).map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between border p-2 shadow my-3\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h5\",{className:\"text-white\",key:item[0]},item[1].postName),/*#__PURE__*/React.createElement(\"small\",{className:\"text-info\"},item[1].postDate)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{id:item[0],value:item[1].postName,onClick:function onClick(e){return onPostClick(item[1].postName,item[1].postDetail,item[1].postDate,item[0],e);},className:\"btn btn-transparent mt-2\"},/*#__PURE__*/React.createElement(\"i\",{className:\"text-white fa fa-list\",\"aria-hidden\":\"true\"}))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-warning\",role:\"alert\"},\"No todo added!\")),/*#__PURE__*/React.createElement(\"br\",null),showModal&&/*#__PURE__*/React.createElement(Modal,{content:modalContent,close:modalCloseHandler}),showDetails&&/*#__PURE__*/React.createElement(Modal,{content:showmodalContent,close:showmodalCloseHandler}));}export default Todo;","map":{"version":3,"sources":["/home/wws/Desktop/todo-app/src/components/Todo/Todo.js"],"names":["React","useState","useEffect","useContext","Modal","Axios","AuthContext","Todo","props","currentUser","bucketId","showModal","setShowModal","showDetails","setShowDetails","postTitle","setPostTitle","postDescription","setPostDescription","scheduleDate","setScheduleDate","formComplete","setFormComplete","formIncompleteError","setFormIncompleteError","postName","setPostName","postDetail","setPostDetail","postDate","setPostDate","postData","setPostData","isPostAdded","setIsPostAdded","isPostDelete","setIsPostDelete","isPostEdited","setIsPostEdited","editDetails","setEditDetails","todoId","setPostId","postTitles","useRef","postDescriptions","scheduleDates","userId","uid","today","Date","month","day","getMonth","getDate","date","getFullYear","getPostData","email","get","then","response","data","catch","error","console","log","handleAddPostData","e","current","value","length","put","user","alert","post","onPostClick","postId","handleEdit","handleDelete","window","confirm","delete","modalCloseHandler","showmodalCloseHandler","modalContent","color","event","target","showmodalContent","Object","entries","map","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport  \"./Todo.css\";\nimport Modal from './../../common/Modal/Modal';\nimport Axios from \"axios\";\nimport { AuthContext } from '../../context/Auth';\n\n\nfunction Todo(props) {\n  const { currentUser } = useContext(AuthContext);\n\n  const {bucketId} = props;\n  \n  const [showModal, setShowModal] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n  const [postTitle, setPostTitle] = useState(\"\");\n  const [postDescription, setPostDescription] = useState(\"\");\n  const [scheduleDate, setScheduleDate] = useState(\"\");\n  const [formComplete, setFormComplete] = useState(false);\n  const [formIncompleteError, setFormIncompleteError] = useState(false);\n\n  const [postName, setPostName] = useState(\"\");\n  const [postDetail, setPostDetail] = useState(\"\");\n  const [postDate, setPostDate] = useState(\"\");\n\n  const [postData, setPostData] = useState(\"\");\n  const [isPostAdded, setIsPostAdded] = useState(false);\n  const [isPostDelete, setIsPostDelete] = useState(false);\n  const [isPostEdited, setIsPostEdited] = useState(false);\n\n  const [editDetails, setEditDetails] = useState(false);\n  const [todoId, setPostId] = useState(\"\");\n\n  const postTitles  = React.useRef();\n  const postDescriptions  = React.useRef();\n  const scheduleDates  = React.useRef();\n\n  const userId = currentUser.uid;\n \n    // to Hide past date\n    var today = new Date();\n    var month,\n      day = null;\n    if (today.getMonth() < 10 || today.getDate() < 10) {\n      month = \"0\" + (today.getMonth() + 1);\n      day = \"0\" + today.getDate();\n    }\n    var date = day + \"-\" + month + \"-\" + today.getFullYear();\n\n    useEffect(() => {\n      setIsPostAdded(false);\n      setIsPostDelete(false);\n      setIsPostEdited(false);\n      getPostData(currentUser.email);\n    }, [isPostAdded, isPostDelete, isPostEdited, currentUser]);\n\n    const getPostData = (email) => {\n      Axios\n      .get(`https://todo-app-a1032.firebaseio.com/${userId}/bucketContents/${bucketId}/todo.json`)\n      .then((response) => {\n        setPostData(response.data)\n        // setPostData(Object.entries(response.data).filter((e)=>(e.user === email)));\n        // console.log(response);\n      })\n      .catch((error) => console.log(error));\n  };\n  \n//  to Add and Edit cardData in DB\nconst handleAddPostData = (e) => {\n  //   check if all input is taken\n  if(postTitles.current.value.length === 0 || postDescriptions.current.value.length === 0  || scheduleDates.current.value.length === 0 ){\n    setFormComplete(false);\n    setFormIncompleteError(true);\n  } else {\n    // if user wants to edit then put request is used\n    if (editDetails) {\n      Axios\n      .put(`https://todo-app-a1032.firebaseio.com/${userId}/bucketContents/${bucketId}/todo/${todoId}.json`,\n        {\n          postName: postName === \"\" ? postTitle : postName,\n          postDetail: postDetail === \"\" ? postDescription : postDetail,\n          postDate: postDate === \"\" ? scheduleDate : postDate,\n          user: currentUser.email,\n        }\n      )\n        .then((response) => {\n          alert(\"ToDo edited succesfully\");\n          setIsPostEdited(true);\n        })\n        .catch((error) => console.log(\"Error in editDetails\" + error));\n    }\n    //  if user wants to add a new card\n    else {\n      Axios\n      .post(`https://todo-app-a1032.firebaseio.com/${userId}/bucketContents/${bucketId}/todo.json`,\n        {\n          postName: postName,\n          postDetail: postDetail,\n          postDate: postDate,\n          user: currentUser.email,\n        }\n      )\n        .then((response) => {\n          alert(\"ToDo added succesfully\");\n          setIsPostAdded(true);\n        })\n        .catch((error) => console.log(\"Error\" + error));\n    }\n\n    setShowModal(false);\n    setEditDetails(false);\n\n    setPostName(\"\");\n    setPostDetail(\"\");\n    setPostDate(\"\");\n  }\n};\n\n  // on click of card this function shows details\n  const onPostClick = (\n    postTitle,\n    postDescription,\n    scheduleDate,\n    postId,\n    e\n  ) => {\n    setShowDetails(true);\n\n    setPostTitle(postTitle);\n    setPostDescription(postDescription);\n    setScheduleDate(scheduleDate);\n    setPostId(postId);\n  };\n\n   // handles edit button click\n const handleEdit = (e) => {\n  setShowDetails(false);\n  setShowModal(true);\n  setEditDetails(true);\n};\n\n\n\n  // handles archive on card archive click\n  const handleDelete = (e) => {\n    if (window.confirm(\"Are you sure you want to delete the ToDo?\")) {\n    Axios\n    .delete(`https://todo-app-a1032.firebaseio.com/${userId}/bucketContents/${bucketId}/todo/${todoId}.json`)\n      .then((response) => {\n        alert(\"ToDo deleted succesfully\");\n        setIsPostDelete(true);\n      })\n      .catch((error) => console.log(\"Error\" + error));\n      setShowDetails(false);\n    }\n  };\n\n\n\n  const  modalCloseHandler = () => { setShowModal(false); setEditDetails(false);};\n\n  const  showmodalCloseHandler = () => {setShowDetails(false)};\n\n  //modal of Add and Edit Card\n  let modalContent = showModal ? \n\n  (\n      <>\n    <div className=\"container py-4\">\n      <div className=\"row\">\n        <div className=\"col-md-12 text-left\">\n          <h3 className=\"text-warning\">{editDetails ? 'Edit ToDo' : 'Add ToDo'}</h3>\n          {formIncompleteError ? <p style={{color : 'red'}}>Kindly complete the form before adding Column</p> : null}\n        <div className=\"form-group\">\n          <label htmlFor=\"postTitle\" className=\"text-white\">Title</label>\n          <input type=\"text\" id=\"post_title\" defaultValue={editDetails ? postTitle : \"\"} placeholder=\"Enter a title\" ref={postTitles} onChange={(event) => setPostName(event.target.value)} className=\"form-control\"/>\n        </div> \n        <div className=\"form-group\">\n          <label htmlFor=\"postDescription\" className=\"text-white\">Description</label>\n          <textarea type=\"text\" id=\"post_description\" defaultValue={editDetails ? postDescription : \"\"} placeholder=\"Enter a Description\" ref={postDescriptions} onChange={(event) => setPostDetail(event.target.value)} className=\"form-control\"></textarea>\n        </div> \n        <div className=\"form-group\">\n          <label htmlFor=\"schedule\" className=\"text-white\">Date</label>\n          <input type=\"date\" id=\"schedule_date\" min={date} defaultValue={editDetails ? scheduleDate : \"\"} ref={scheduleDates} onChange={(event) => setPostDate(event.target.value)} className=\"form-control\"/>\n        </div>\n        <button disabled={formComplete} className=\"btn btn-warning\" onClick={handleAddPostData}>{editDetails ? 'Edit ToDo' : 'Add ToDo'}</button>\n        </div>\n      </div>\n    </div>\n\n  \n      </>\n  )\n  :null;\n\n  //modal of show card details\n  let showmodalContent = showDetails ? \n\n  (\n      <>\n  <div className=\"container my-4\">\n        <div className=\"row\">\n          <div className=\"col-lg-12\">\n          <div className=\"d-flex justify-content-between\">\n            <div> \n                <h3 className=\"text-left text-warning\">View ToDo</h3>\n            </div>\n            <div>\n                <button type=\"button\" id=\"editBtn\" className=\"btn btn-sm btn-warning\" onClick={handleEdit}><i className=\"fa fa-pencil\" aria-hidden=\"true\"></i></button>\n                <button type=\"button\" id=\"deleteBtn\" className=\"btn btn-danger btn-sm ml-2\" onClick={handleDelete}><i className=\"fa fa-trash\" aria-hidden=\"true\"></i></button>\n            </div>\n          </div>\n          <hr/>\n          <div className=\"text-left my-4\">\n            <h4>Title</h4>\n            <p>{postTitle}</p>\n          </div>\n          <div className=\"text-left my-4\">\n            <h4>Description</h4>\n            <p>{postDescription}</p>\n          </div>\n          <div className=\"text-left my-4\">\n            <h4>Date</h4>\n            <p>{scheduleDate}</p>\n          </div>\n      </div>\n      </div>\n      </div>\n      </>\n     \n  )\n  :null;\n\n  return (\n    <div className=\"todo-data bg-black pt-3\">\n      <div className=\"d-flex justify-content-between border p-2 shadow \">\n          <div className=\"pt-2\">\n              <h4 className=\"text-white\">Add To-Do</h4>\n          </div>\n          <div>\n              <button className=\"btn btn-warning\" onClick={() => setShowModal(true)}><i class=\"fa fa-plus-square\" aria-hidden=\"true\"></i></button>\n          </div>\n      </div>\n\n      <div className=\"todo-list my-4\">\n     \n      {postData ?\n        Object.entries(postData).map((item) => (\n       \n        <div className=\"d-flex justify-content-between border p-2 shadow my-3\">\n            <div>\n              <h5 className=\"text-white\" key={item[0]}>{item[1].postName}</h5>\n              <small className=\"text-info\">{item[1].postDate}</small>\n            </div>\n            <div>\n              <button  id={item[0]} value={item[1].postName} onClick={(e) =>\n                    onPostClick(\n                      item[1].postName,\n                      item[1].postDetail,\n                      item[1].postDate,\n                      item[0],\n                      e\n                    )\n                  } className=\"btn btn-transparent mt-2\"><i className=\"text-white fa fa-list\" aria-hidden=\"true\"></i></button>\n            </div>\n        </div>\n       \n        ) ) : <div className=\"alert alert-warning\" role=\"alert\">No todo added!</div>\n        }\n\n      </div>\n        <br />\n        {showModal && (\n        \n            <Modal  \n                content = {modalContent}\n                close = {modalCloseHandler}/> \n        )}\n       \n       {showDetails && (\n        \n        <Modal  \n            content = {showmodalContent}\n            close = {showmodalCloseHandler}/> \n    )}\n\n    </div>\n\n\n   \n)\n}\n\nexport default Todo;\n"]},"metadata":{},"sourceType":"module"}